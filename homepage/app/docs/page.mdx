import {
    Highlight,
    Class,
    PropDecl,
    ClassRef,
    PropRef,
    PropCategory,
    NavPackage
} from "@/components/docs/tags";

<div className="sticky overflow-y-scroll w-[14rem] h-[calc(100dvh-8rem)] -mb-[calc(100dvh-8rem)] top-[6rem] pr-6 mr-10 overflow-y-scroll prose-sm prose-ul:pl-1 prose-ul:ml-1 prose-li:my-2 prose-li:leading-tight prose-ul:list-['-'] border-r">
Quickstart

-   Collaborative counter

Guide

-   Intro to CoValues
-   Refs, load & subscribe
-   Groups & permissions
-   Accounts & migrations
-   Backend workers & app&nbsp;architectures

Main packages

<NavPackage name="jazz-tools">

-   <ClassRef name="CoMap" />, <ClassRef name="CoList" />
-   <ClassRef name="CoStream" />, <ClassRef name="BinaryCoStream" />
-   <ClassRef name="Account" />, <ClassRef name="Group" />
-   <PropRef prop="co" />, Interfaces & Types
-   <ClassRef name="ImageDefinition" />

</NavPackage>

<NavPackage name="jazz-react">

-   <PropRef prop="JazzReact()" />
    - <PropRef prop="<Provider/>" />
    - <PropRef prop="useAccount()" />
    - <PropRef prop="useCoState()" />
-   Auth Providers
-   <PropRef prop="<ProgressiveImg/>" />

</NavPackage>


<NavPackage name="jazz-nodejs">

-   <PropRef prop="createOrResumeWorker()" />

</NavPackage>

Supporting packages

<NavPackage name="jazz-browser">

-   <PropRef prop="createBrowserContext()" />
-   Auth Providers
-   Invite Links
-   BinaryStream ↔︎ Blob

</NavPackage>

<NavPackage name="jazz-browser-media-image">

-   <PropRef prop="createImage()" />

</NavPackage>


</div>

<div className="ml-[17rem]">

# Guide

## Intro to `CoValue`s

## `Ref`s, loading & subscribing

# API Reference

## `jazz-tools` (package)

<div class="not-prose">

<Class name="CoMap<Fields>" doc="CoMaps are collaborative versions of plain objects, mapping string-like keys to values.">

<PropCategory name="Contents" />

<PropDecl
    name={`[Key in Fields]`}
    type={`Fields[Key]`}
    doc={
        <>
            The properties declared on this <ClassRef name="CoMap" />, behaving
            like a regular plain object, so you can use dot notation to get/set
            them, use <PropRef on="Object" prop="keys()" /> to iterate over
            them, etc.
        </>
    }
/>
<PropDecl
    name={`_refs`}
    type={`{ [Key in CoKeys<Fields>]: RefIfCoValue<Fields[Key]> }`}
    doc={
        <>
            If property `<PropRef prop="prop" />` is a{" "}
            <PropRef on="co" prop="ref(...)" />, you can use{" "}
            <PropRef on="coMap" prop="_refs.prop" /> to access the{" "}
            <ClassRef name="Ref" /> instead of the potentially loaded/null
            value. This allows you to always get the ID or load the value
            manually.
        </>
    }
/>

<PropCategory name="Collaboration" />

<PropDecl
    name={`_edits`}
    type={`{ [Key in CoKeys<Fields>]: {
    value?: Fields[Key];
    ref?: RefIfCoValue<Fields[Key]>;
    by?: Account;
    madeAt: Date;
    all: { value?: Fields[Key]; ... }[];
} }`}
    doc={
        <>
            <p className="mb-4">
                Lets you access the edit history for each property in this{" "}
                <ClassRef name="CoMap" />. Directly includes the current value,
                the <ClassRef name="Ref" /> if the property holds a reference,
                the author <ClassRef name="Account" />, and the timestamp.
            </p>
            <p>
                Access whole edit history with `all`, with entries of the
                same shape.
            </p>
        </>
    }
/>

<PropDecl name={`_owner`} type={`Account | Group`} doc={
    <>
        The <ClassRef name="Account" /> or <ClassRef name="Group" /> that owns this <ClassRef name="CoMap" />.
    </>

}/>

<PropCategory name="Value identity" />

<PropDecl
    name={`id`}
    type={`ID<this>`}
    doc={
        <>
            The ID of this <ClassRef name="CoMap" />
        </>
    }
/>

<PropCategory name="Type info" />

<PropDecl
    name={`_type`}
    type={`"CoMap"`}
    doc={
        <>
            Distinguishes this as a <ClassRef name="CoMap" /> from other
            CoValues
        </>
    }
/>
<PropDecl
    name={`_schema`}
    type={`{ [Key in CoKeys<Fields>]: SchemaFor<Fields[Key]>; }`}
    doc={
        <>
            Stores the schema for each property in this{" "}
            <ClassRef name="CoMap" />. Define with <PropRef prop={"co(...)"} />.
        </>
    }
/>

</Class>

<Class name="CoList<Item> extends Array<Item>" doc="CoLists are collaborative versions of arrays.">

<PropCategory name="Contents" />

<PropDecl
    name={`[idx: number]`}
    type={`Item`}
/>
<PropDecl
    name={`_refs`}
    type={`{ [idx: number]: RefIfCoValue<Fields[Key]> }`}
/>

<PropCategory name="Collaboration" />

<PropDecl
    name={`_edits`}
    type={`{ [idx: number]: {
    value?: Item;
    ref?: RefIfCoValue<Item>;
    by?: Account;
    madeAt: Date;
} }`}
    doc={
        <>
            <p className="mb-4">
                Lets you access the edit history for each index in this{" "}
                <ClassRef name="CoList" />. Directly includes the current value,
                the <ClassRef name="Ref" /> if the item is a reference,
                the author <ClassRef name="Account" />, and the timestamp.
            </p>
        </>
    }
/>

<PropDecl name={`_owner`} type={`Account | Group`} doc={
    <>
        The <ClassRef name="Account" /> or <ClassRef name="Group" /> that owns this <ClassRef name="CoList" />.
    </>

}/>

<PropCategory name="Type info" />

<PropDecl
    name={`_type`}
    type={`"CoList"`}
    doc={
        <>
            Distinguishes this as a <ClassRef name="CoMap" /> from other
            CoValues
        </>
    }
/>
<PropDecl
    name={`_schema`}
    type={`{ [co.items]: SchemaFor<Item>; }`}
    doc={
        <>
            Stores the schema of the items in this{" "}
            <ClassRef name="CoList" />. Define with <PropRef on="CoList" prop={"Of(...)"} /> and <PropRef prop={"co(...)"} />.
        </>
    }
/>

</Class>

<Class name="CoStream<Item>" doc="CoStreams are a collection of independent append-only streams per participant.">

<PropCategory name="Contents" />

<PropDecl
    name={`[key: ID<Account>]`}
    type={`{
    value?: Item,
    ref?: RefIfCoValue<Item>,
    madeAt: Date
}`}
/>

<PropDecl
    name={`perSession`}
    type={`{ [key: SessionID]: {
        value?: Item,
        ref?: RefIfCoValue<Item>,
        madeAt: Date
} }`}
/>

</Class>

<Class name="BinaryCoStream" doc="BinaryCoStreams represent binary files and live streams.">

</Class>

</div>

## `jazz-react` (package)

## `jazz-browser` (package)

</div>
