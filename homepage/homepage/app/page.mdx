import {
    GridFeature,
    GridCard,
    MultiplayerIcon,
    ResponsiveIframe,
    ComingSoonBadge,
} from "@/components/forMdx";
import { Prose, SmallProse } from "gcmp-design-system/src/app/components/molecules/Prose";
import { HeroHeader } from "gcmp-design-system/src/app/components/molecules/HeroHeader";
import { SectionHeader } from "gcmp-design-system/src/app/components/molecules/SectionHeader";
import { HairlineBleedGrid } from "gcmp-design-system/src/app/components/molecules/HairlineGrid";
import { GappedGrid } from "gcmp-design-system/src/app/components/molecules/GappedGrid";
import { LabelledFeatureIcon } from "gcmp-design-system/src/app/components/molecules/LabelledFeatureIcon";
import { JazzLogo, LocalFirstConfLogo } from "@/components/logos";
import {
    WorkflowIcon,
    UploadCloudIcon,
    PlaneIcon,
    MonitorSmartphoneIcon,
    GaugeIcon,
    UsersIcon,
    FileLock2Icon,
    HardDriveDownloadIcon,
    KeyRoundIcon
} from "lucide-react";
import { App_tsx, ChatScreen_tsx } from "@/codeSamples/examples/chat/src";
import Link from "next/link";

<HeroHeader
    title="Instant sync."
    slogan="A new way to build apps with distributed state."
/>

<HairlineBleedGrid>
    <LabelledFeatureIcon label="Cross-device sync" icon={MonitorSmartphoneIcon} />
    <LabelledFeatureIcon label="Real-time multiplayer" icon={MultiplayerIcon} />
    <LabelledFeatureIcon label="Team/social features" icon={UsersIcon} />
    <LabelledFeatureIcon label="Built-in permissions" icon={FileLock2Icon} />
    <LabelledFeatureIcon label="Cloud sync & storage" icon={UploadCloudIcon} />
    <LabelledFeatureIcon label="On-device storage" icon={HardDriveDownloadIcon} />
    <LabelledFeatureIcon label="Instant UI updates" icon={GaugeIcon} />
    <LabelledFeatureIcon label="E2EE & signatures" icon={KeyRoundIcon} />

    <div className="col-start-1 row-start-1 row-span-2 col-span-2 px-4 md:px-6 pb-4 text-base">
        <Prose>
            <h2 className="not-prose text-2xl font-medium tracking-tight mt-3 md:mt-5 mb-6">Hard things are easy now.</h2>

            Jazz is an **open-source toolkit** that replaces APIs, databases and message queues with **a&nbsp;single new abstraction:**

            **&ldquo;Collaborative Values&rdquo;** &mdash; **distributed state** with **secure permissions built-in.**

            Features that used to take months to build now work out-of-the-box.
        </Prose>
</div>
</HairlineBleedGrid>

<div className="-mx-[calc(min(0,(100vw-95rem)/2))]">
    <SectionHeader title="First impressions..." slogan="A chat app in 84 lines of code."/>

    <GappedGrid className="mt-0 -mx-4 md:-mx-6">
        <div className="md:col-start-1 col-span-2">
            <App_tsx/>
        </div>
        <div className="md:col-start-3 col-span-2">
            <ChatScreen_tsx/>
        </div>
        <ResponsiveIframe
            src="https://chat.jazz.tools"
            localSrc="http://localhost:5173"
            className="lg:col-start-5 col-span-2 rounded-xl overflow-hidden min-h-[50vh]"
        />
    </GappedGrid>
</div>

<SectionHeader
    title="Collaborative Values"
    slogan="Your new building blocks."/>

<Prose>
Based on CRDTs and public-key cryptography, CoValues...

-   Can be read & edited like simple local JSON state
-   Can be created anywhere, are automatically synced & persisted
-   Always keep full edit history & author metadata
-   Automatically resolve most conflicts

</Prose>

<GappedGrid title="Bread-and-butter datastructures" className="grid-cols-2 lg:grid-cols-4">
    <GridCard>
        #### `CoMap`
        <div className="text-sm">
            - Collaborative key-value map - Possible values: - Immutable JSON &
            other CoValues
        </div>
    </GridCard>

    <GridCard>
        #### `CoList`
        <div className="text-sm">
            - Collaborative ordered list - Possible items: - Immutable JSON & other
            CoValues
        </div>
    </GridCard>

    <GridCard>
        #### `CoPlainText` & `CoRichText` <ComingSoonBadge />
        <div className="text-sm">
            - Collaborative plain-text & rich-text - Gracefully prevents most
            editing conflicts - Rendered as markdown, HTML, JSX, etc.
        </div>
    </GridCard>

    <GridCard>
        #### `CoStream`
        <div className="text-sm">
            - Collection of independent per-user items streams:
                - Immutable JSON & other CoValues
            - Great for presence, reactions, polls, replies etc.
        </div>
    </GridCard>
</GappedGrid>

<GappedGrid title="First-class files & binary data" className="grid-cols-2 lg:grid-cols-4">

<GridCard>
    #### `BinaryCoStream`
    <div className="text-sm">
        - Represents a file or live binary stream - Can be referenced and synced
        like any other CoValue - Can easily be converted from/to browser `Blob`s
        - <code>{`<input type="file"/>`}</code> -> `BinaryCoStream` -> `Blob` ->
        `BlobURL`
    </div>
</GridCard>

<GridCard>
    #### `ImageDefinition`
    <div className="text-sm">
        - Represents multiple resolutions of the same image - Can be
        progressively loaded, including super fast blur preview & image size
        info
    </div>
</GridCard>

</GappedGrid>

<GappedGrid title="Secure permissions, authorship & teams" className="grid-cols-2 lg:grid-cols-4">
    <GridCard>
        #### `Group`
        <div className="text-sm">
        - A scope where specified accounts have roles (`reader`/`writer`/`admin`).
        - A `Group` owns `CoValues`, with access right determined by group roles.
        - Accounts can be added to groups directly or using shareable invite secrets.
        </div>
    </GridCard>
    <GridCard>
        #### `Account`
        <div className="text-sm">
        - Represents a single user and their signing/encryption keys.
        - Has a private account root and a public profile
            - Can contain arbitrary app-specific data
        </div>
    </GridCard>
</GappedGrid>

<SectionHeader
    title="The Jazz Toolkit"
    slogan="A high-level toolkit for building apps around CoValues."/>

<Prose>
    Supported environments:
</Prose>
<SmallProse>
    <div className="text-sm">
        - Browser (sync via WebSockets, IndexedDB persistence)
            - React
            - Vanilla JS / framework agnostic base
        - React Native <ComingSoonBadge/>
        - NodeJS (sync via WebSockets, SQLite persistence) <ComingSoonBadge/>
        - Swift, Kotlin, Rust <ComingSoonBadge when="later"/>
    </div>
</SmallProse>

<GappedGrid>
    <GridCard>
        <SectionHeader title="Auto-sub" slogan="Let your UI drive data-syncing."/>
        <div className="text-sm">
            - Load and auto-subscribe to deeply nested `CoValues` with a reactive
            hook (or callback).
            - Access properties & metadata as plain JSON.
            - Make granular changes with simple mutators.
            - No queries needed, everything loads on-demand: <br />
            `profile?.tweets?.map(tweet => tweet?.text)`
        </div>
    </GridCard>

    <GridCard>
        <SectionHeader title="Cursors & carets" slogan="Ready-made spatial presence."/>
        <div className="text-sm">
            - 2D canvas cursors <ComingSoonBadge />
            - Text carets <ComingSoonBadge />
            - Element-based focus-presence <ComingSoonBadge />
            - Scroll-based / out-of-bounds helpers <ComingSoonBadge />
        </div>
    </GridCard>

    <GridCard>
        <SectionHeader title="Auth Providers" slogan="Plug and play different kinds of auth."/>
        <div className="text-sm">
            - DemoAuth (for quick multi-user demos)
            - WebAuthN (TouchID/FaceID)
            - Auth0, Clerk & Okta <ComingSoonBadge/>
            - NextAuth <ComingSoonBadge/>
        </div>
    </GridCard>

    <GridCard>
        <SectionHeader title="Two-way sync to your DB" slogan="Add Jazz to an existing app."/>
        <div className="text-sm">
            - Prisma <ComingSoonBadge />
            - Drizzle <ComingSoonBadge />
            - PostgreSQL introspection <ComingSoonBadge />
        </div>
    </GridCard>

    <GridCard>
        <SectionHeader title="File upload & download" slogan="Just use `<input type='file'/>`."/>
        <div className="text-sm">
        - Easily convert from and to Browser `Blob`s
        - Super simple progressive image loading
        </div>
    </GridCard>

    <GridCard>
        <SectionHeader title="Video presence & calls" slogan="Stream and record audio & video."/>
        <div className="text-sm">
        - Automatic WebRTC connections between `Group` members <ComingSoonBadge/>
        - Audio/video recording into `BinaryCoStreams` <ComingSoonBadge/>
        </div>
    </GridCard>
</GappedGrid>

<SectionHeader title="Jazz Mesh" slogan="Serverless sync & storage for Jazz apps"/>

To give you sync and secure collaborative data instantly on a global scale, we're running Jazz Mesh. It works with any Jazz-based app, requires no setup and has straightforward, scale-to-zero pricing.

Jazz Mesh is currently free &mdash; and it's set up as the default sync & storage peer in Jazz, letting you start building multi-user apps with persistence right away, no backend needed.

<Link href="/mesh" target="_blank">
    Learn more about Jazz Mesh
</Link>

## Get Started

-   <Link href="/docs" target="_blank">Read the docs</Link>
-   <Link href="https://discord.gg/utDMjHYg42" target="_blank">Join our Discord</Link>